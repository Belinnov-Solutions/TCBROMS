@model IEnumerable<Entity.Models.OrderMenuItemsResponse>

@{
    Layout = null;
    bool isEven = false;
    int val = 0;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.15.0/css/mdb.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;&display=swap" rel="stylesheet">
    <style>
    </style>
    @*<style>
          a:hover, a:focus {
              color: #2a6496;
              text-decoration: none;
          }

          .square-service-block {
              position: relative;
              overflow: hidden;
              margin: 15px auto;
          }

              .square-service-block a {
                  background-color: #e74c3c;
                  border-radius: 5px;
                  display: block;
                  padding: 60px 20px;
                  text-align: center;
                  width: 100%;
              }

                  .square-service-block a:hover {
                      background-color: rgba(231, 76, 60, 0.8);
                      border-radius: 5px;
                  }

          .ssb-icon {
              color: #fff;
              display: inline-block;
              font-size: 28px;
              margin: 0 0 20px;
          }

          h2.ssb-title {
              color: #fff;
              font-size: 20px;
              font-weight: 200;
              margin: 0;
              padding: 0;
              text-transform: uppercase;
          }
        </style>*@

</head>
<body style="font-size:22px !important">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <style>
        #Heading {
            color: black;
        }

        #foods {
            color: black;
        }
    </style>

    <div class="container" style="margin-top:5%">

        <div class=" row">
            @foreach (var item in Model)
            {
                //{
                //    val = item.BatchNo % 2;
                //}


                @*if (val == 0)
                    {
                    <style>
                        .card {
                            background-image: linear-gradient(#e52d27,#b31217)
                        }
                    </style>
                    }
                    else
                    {
                    <style>
                        .card {
                            background-image: linear-gradient(#654ea3,#eaafc8)
                        }
                    </style>
                    }*@
                if (item.Processed == true)
                {
                    <div class="col-12">

                        @*<div class="card" style="background-color: linear-gradient(#bdc3c7,#2c3e50)">*@
                        @*<div class="card" style="background-color:lightgrey" onclick="isProcessed(@item.BatchNo)">*@
                        <div class="card" style="background-color:lightgrey" onclick="OutProcessed(@item.BatchNo)">
                            <div class="card-body">
                                <div class="d-flex" style="margin-top:-15px">
                                    <div>
                                        <h3 style="color:black">Table @item.TableNumber</h3>
                                    </div>
                                    <div class="ml-auto">
                                        <h5 style="color:black">@item.OrderTime</h5>
                                    </div>
                                </div>

                                <hr style="color:black !important; margin-top:-5px !important; margin-bottom:5px !important" />
                                @{ int it = 1;

                                    item.MenuItems.RemoveAll(r => r.Count == 0);
                                    var lenght = item.MenuItems.Count;
                                }
                                @foreach (var vals in item.MenuItems)
                                {

                                    if (vals.Count > 0)
                                    {
                                        foreach (var items in vals)
                                        {


                                            <div class="row" id="foods">
                                                <div class="col-10">
                                                    <div>
                                                        <span style="font:50%">&#8226; @items.Name </span>
                                                    </div>
                                                    <span>&nbsp; &nbsp;@items.ChineseName</span>
                                                </div>
                                                <div class="col-2 text-right">
                                                    @items.Qty
                                                </div>
                                            </div>
                                            <hr style="margin-top:0px;margin-bottom:0px" />
                                        }
                                        if (it < lenght)
                                        {
                                            <hr style="border:dashed;color:black" />
                                        }
                                        it = it + 1;
                                    }
                                    else
                                    {
                                        lenght = lenght - 1;
                                    }

                                }

                                @*<a href="#" class="card-link">Action</a>
                                    <a href="#" class="card-link">Done</a>*@
                            </div>
                        </div>
                    </div>
                    @:&nbsp;
                }
                else
                {
                    <div class="col-12">

                        @*<div class="card" style="background-image: linear-gradient(#C9D6FF,#E2E2E2)">*@
                        <div class="card" style="background-color:white" onclick="isProcessed(@item.BatchNo)">
                            <div class="card-body">
                                <div class="d-flex" style="margin-top:-15px">
                                    <div>
                                        <h3 style="color:black">Table @item.TableNumber</h3>
                                    </div>
                                    <div class="ml-auto">
                                        <h5 style="color:black">@item.OrderTime</h5>
                                    </div>
                                </div>

                                <hr style="color:black !important; margin-top:-5px !important; margin-bottom:5px !important" />
                                @{ int it = 1;

                                    item.MenuItems.RemoveAll(r => r.Count == 0);
                                    var lenght = item.MenuItems.Count;
                                }
                                @foreach (var vals in item.MenuItems)
                                {

                                    if (vals.Count > 0)
                                    {
                                        foreach (var items in vals)
                                        {


                                            <div class="row" id="foods">
                                                <div class="col-10">
                                                    <div>
                                                        <span style="font:50%">&#8226; @items.Name </span>
                                                    </div>
                                                    <span>&nbsp; &nbsp;@items.ChineseName</span>
                                                </div>
                                                <div class="col-2 text-right">
                                                    @items.Qty
                                                </div>
                                            </div>
                                            <hr style="margin-top:0px;margin-bottom:0px" />
                                        }
                                        if (it < lenght)
                                        {
                                            <hr style="border:dashed;color:black" />
                                        }
                                        it = it + 1;
                                    }
                                    else
                                    {
                                        lenght = lenght - 1;
                                    }

                                }

                                @*<a href="#" class="card-link">Action</a>
                                    <a href="#" class="card-link">Done</a>*@
                            </div>
                        </div>
                    </div>
                    @:&nbsp;
                }
            }
        </div>
        <br />
    </div>
    <script>
 function isProcessed(Bno) {
     $.ajax({
         url: '@Url.Action("ProcessBatchOrder", "V1")',
         //url: 'http://huddersfield.thechinesebuffet.com/tcbroms/v1/ProcessBatchOrder',
         //  contentType: "application/json; charset=utf-8",
         dataType: "json",
         type: 'Get',
         data: {
            BatchNo:Bno
         },
    //responseType: "json",
    success: function (result) {
    //$("#loading-screen").hide();
    //result = result.replace(/\n/g, ' ').replace(/\r/g, ' ');
    //fetchTermsSuccess(result);
        window.location.reload();
    },
    error: function (result) {
        alert("Something Went Wrong! While Processing Batch" + Bno);
   }
    });
    }
    </script>
    <script>
        function OutProcessed(Bno) {
            if (confirm("Are You sure You want to mark it Unprocessed")) {
                $.ajax({
                    url: '@Url.Action("ProcessBatchOrder", "V1")',
                    //url: 'http://huddersfield.thechinesebuffet.com/tcbroms/v1/ProcessBatchOrder',
                    //  contentType: "application/json; charset=utf-8",

                    dataType: "json",
                    type: 'Get',
                    data: {
                        BatchNo: Bno
                    },
                    //responseType: "json",
                    success: function (result) {
                        //$("#loading-screen").hide();
                        //result = result.replace(/\n/g, ' ').replace(/\r/g, ' ');
                        //fetchTermsSuccess(result);
                        window.location.reload();
                    },
                    error: function (result) {
                        alert("Something Went Wrong! While Processing Batch" + Bno);
                    }
                });
            }
            else {
                return false
            }
    }
    </script>
</body>
</html>

